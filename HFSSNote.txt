

HFSS电磁仿真设计应用详解学习笔记

第一章 HFSS概述

1.  HFSS具体应用领域
    射频和微波无源器件设计
	天线、天线阵设计
	高速数字信号完整性分析
	EMC/EMI问题分析
	电真空器件设计
	目标特性研究和RCS仿真
	计算SAR
	光电器件仿真设计
	
2.  HFSS设计流程
  1）.新建一个设计工程
  2）.选择求解类型。HFSS包含三种求解类型：模式驱动求解、终端驱动求解、本征模求解
  3）.创建参数化设计模型。HFSS中，创建参数化设计模型包括：标出准确的几何模型、指定模型材料、准确地分配边界条件和端口激励
  4）.求解设置。包括制定求解频率（软件在该频率下进行自适应网格剖分计算）、收敛误差和网格剖分最大迭代次数等信息；如果需要进行扫频分析，还需选择扫频类型并指定范围
  5）.运行仿真
  6）.数据后处理，查看计算结果，包括S参数、场分布、电流分布、谐振频率、品质因数Q、天线辐射方向图等。
  
    此外HFSS还集成了Ansoft公司的Optimetrics设计优化模块，可对设计的模型进行参数扫描分析、优化设计、协调分析、灵敏度分析和统计分析。
	

	
	
第五章 边界条件和激励

1.  在电磁问题的分析中，边界条件定义了求解区域的边界以及不同物体交界处的电磁场特性，是求解麦克斯韦方程组的基础；
2.  电磁场问题的求解终将要归于麦克斯韦方程组的求解，HFSS中波动方程的求解同样是由微分形式的Maxwell方程推到而来，但只有场矢量是单值、有界并沿着空间连续分布的前提下，
    微分形式的Maxwell方程组才是有效的；但在求解区域的边界、不同介质的交界处以及场源处，场矢量是不连续的，导数失去意义。
	
	边界条件就是定义跨越不连续边界处的电磁场特性。
	
	HFSS求解问题时，将物体存在的空间当做一个虚拟的原型空间，与边界无限大的真实世界不同，为了实际计算的需要，虚拟原型空间被设置为有限的；为了获得这个有限的空间，
	HFSS使用了北京的概念和包围几何模型的外部边界条件。

3.  激励也是边界条件的一种，激励端口是一种允许能量进入或流出几何结构的特殊边界条件类型。
4.  HFSS中的边界条件：理想导体边界条件（Perfect E）、理想磁边界条件（Perfect H）、有限导体边界条件（Finite Conductivity）、辐射边界条件（Radiation）、对称边界条件（Symmetry）、
    阻抗边界条件（Impedance）、集总RLC边界条件（LUMPed RLC）、无限地平面（Indinite Ground Plane）、主从边界条件（Master and Slave）、理想匹配层（PML）、分层阻抗边界条件（Layered Impedance）；
	Perfect E:电场矢量垂直于物体表面
	    以下两种情况物体边界自动置为理想导体边界条件：
		  a. 任何与背景相关联的物体表面都将被自动定义为理想导体边界条件，并自动命名为外部 边界条件；此时，HFSS假定整个结构被理想导体壁包围着；
		  b. 材料属性设定为理想电导体（PEC）的物体模型表面会被自动定义为理想导体边界，并命名为smetal边界条件；
		  
    Perfect H: 电场方向与物体表面相切，磁场方向与物体表面垂直。真实世界中并不存在，只是理论上的约束条件。
	    HFSS中灵活设置理想磁边界条件，可实现如下重要功能：
		a. 在背景默认的理想导体边界上叠加理想磁边界条件，可以模拟开放的自由空间。
	    b. 在理想导体边界条件上叠加理想磁边界条件将去掉理想导体边界条件，回恢复所选区域为其原先的材料特性；相当于在理想导体表面开个口，允许电场穿过。
		 
    有限导体边界条件：非理想的导体边界条件。表面的电场存在切向分量，用以模拟表面的损耗。
	                  有限导体边界需条件只有在导体模型为良导体时才有效，也就是说在工作频率范围内，导体的厚度要远大于导体的集肤深度。
					  
					  
    辐射边界条件：也称为吸收边界条件，在HFSS分析辐射、散射问题时用以模拟开放的自由空间，常用于天线问题分析。系统在辐射边界吸收电磁波，本质上就可以把边界条件看成是延伸到无限远处；
	
	对称边界条件：用来模拟理想电壁对称面或者理想磁壁对称面。HFSS中，利用对称边界条件，可将模型一分为二，建模时只创建模型的一部分，这样可以减少设计的复杂性，有效缩短求解时间。
	    使用对称边界条件，在定义时需遵循以下原则：
		a. 对称面必须暴露在背景中；
		b. 对称面必须定义在平面表面上，不能定义在曲面；
		c. 同一个设计最多只能定义3个相互正交的对称面；
		   应用对称边界条件，由于只需要构造模型的一部分，端口尺寸发生了变化，因此端口电压、电流和功率都有可能与完整的模型不同，进而影响到端口的阻抗特性。为与原来的特性一致，在定义边界条件时需要正确的设置阻抗倍乘器。
           对于理想电壁对称面，阻抗倍乘器的值设置为2；对于理想磁对称面，阻抗倍乘器需要设置为0.5。
		   
    阻抗边界条件：用以模拟已知阻抗值的电阻性表面，用户需要给出电阻值和电抗值；
	
	集总RLC边界条件：是用一组并联的电阻、电感和电容来模拟物体表面。与阻抗边界条件类似，集总RLC的表面切向电场也可以表示；但用户无需自己提供表面阻抗，只需要提供集总R/L/C的真实值。
	
	
	分层阻抗边界条件：用多层结构将物体表面模拟为一个阻抗表面，其效果与阻抗边界条件相同，与阻抗边界条件不同的是，对于分层阻抗边界条件，HFSS根据输入的分层结构数据和表面粗糙度来计算表面电阻值和表面电抗值；分层阻抗边界条件不支持快速扫频。
	
	无限地平面边界条件：如果将有限大的边界模拟成无限大的地平面，需要设置无限地平面边界条件。设置无限地平面边界条件只影响后处理过程中近区、远区辐射场的计算结果；
	     设置无限大地平面边界条件时，需要满足以下要求：
		 a. 无限大地平面必须暴露在背景上；
		 b. 无限大地平面必须定义在平面上；
		 c. 无限大地平面和对称面的总数不能超过三个；
		 d. 无限大地平面和对称面必须相互垂直；
    主从边界条件：也称为关联边界条件，用于模拟平面周期结构表面。包括主边界条件和从边界条件，二者成对出现，且主边界表面好和从边界表面的形状、大小和方向必须完全相同，主边界表面与从边界表面上的电场存在一定的相位差，该相位差就是周期性结构和相连单元之间存在的相位差；
	
	理想匹配层：能够完全吸收入射电磁波的假想各项异性材料边界。理想匹配层有两种典型的应用：一是用于外场问题中的自由空间截断；而是用于波导问题中的吸收负载。
	            对于波导的吸收负载，理想匹配层模拟波导结构均匀的延伸到无穷远处；
				对于自由空间截断的情况，理想匹配层的作用类似于辐射边界条件，PML表面能够完全吸收入射的电磁波。计算结果更精确。
				
	
5. 激励的类型与设置
  1）. 定义： HFSS中，激励是一种定义在三维物理表面或二维物体上的激励源，可以是电磁场、电压源、电流源、或者电荷源；
  2）. HFSS中常见的激励源：波端口激励、集总端口激励、Floquet端口激励、入射波端口激励、电压源激励、电流源激励和磁偏置激励。
  3）.所有激励类型都可以计算场分布，但只有波端口激励、集总端口激励和Floquet激励可以计算S参数。
  4）.  波端口激励：HFSS中与背景相连的物体表面默认设置为理想导体边界，没有能量可以进出，波端口设置在这样的表面上，提供一个能量流进/流出的窗口。
                    波端口激励常用于波导结构、带状线结构以及共面波导结构等模型的仿真计算。
					
	             a. 端口平移：（Deembed）可以简单的理解为端口平移功能，即将端口平移到新的位置，然后计算出相应的S参数的结果。Deembed功能只影响数据后处理的结果，平移后无需重新运行仿真计算。
       集总端口激励：类似于传统的波端口，与波端口不同之处在于集总端口可以设置在物体的内部，且用户需要设置端口阻抗。另外，集总端口不计算端口处的传播参数，所以集总端口无法进行端口平移操作。
                     集总端口不与边缘任何边界相连的部分默认边界条件是2理想磁边界，因此，集总端口的边界相比于波端口尺寸要小。
	    
       Floquet端口激励：基于Floquet模式进行场求解，用于二维平面周期结构的仿真设计。Floquet端口求解的反射和传输洗漱能够以S参数的形式显示；只有模式驱动求解类型下设计可以使用Floquet端口；
	   
	   磁偏置激励：当使用铁氧体材料时，需要通过设置磁偏置激励来定义铁氧体材料网格的内部偏置场；

	   
	   
	   
	   
	   
第六章    HFSS网格剖分和分析设置


1. 三种求解类型：模式驱动求解（Driven Modal）、终端驱动求解（Driven Terminal）、本征模求解（Eigenmode）
       模式驱动求解：以模式为基础计算S参数，根据波导内各模式场的入射功率和反射功率来计算S参数矩阵的解；
	   终端驱动求解：以终端为基础计算多导体传输线端口的S参数，此时，根据传输线终端电压和电流来计算S参数矩阵的解；
	   本征模求解  ：本征模求解器主要用于谐振问题的设计分析，可以用于计算谐振结构的谐振频率和谐振频率处对应的场分布，以及计算谐振腔体的无载Q值；
	                 本征模求解时，需注意以下几点：
					 a. 不需要设置激励方式；
					 b. 不能定义辐射边界条件；
					 c. 不能进行扫频分析；
					 d. 不能包含铁氧体材料；
					 f. 只有场解结果，没有S参数求解结果；
					
2. HFSS采用有限元法分析三维物体的电磁特性，基本过程包括分析对象的离散化、有限元求解、计算结果处理。
3. 三种扫频方式：快速扫频、离散扫频、插值扫频。



第七章    HFSS中的变量和Optimetrics


1. HFSS中的变量分为工程变量和设计变量，工程变量名词前都冠有符号$。
2. Optimetrics是集成在HFSS中的优化模块，实现参数扫描分析、优化设计、调谐分析、灵敏度分析、统计分析；
3. 


















